// SPDX-FileCopyrightText: 2025 SAP SE or an SAP affiliate company and IronCore contributors
// SPDX-License-Identifier: Apache-2.0

package v1alpha1

import (
	metalv1alpha1 "github.com/ironcore-dev/metal-operator/api/v1alpha1"
	"sigs.k8s.io/controller-runtime/pkg/client"
)

// ShouldAllowForceUpdateInProgress checks if the object should force allow update.
func ShouldAllowForceUpdateInProgress(obj client.Object) bool {
	val, found := obj.GetAnnotations()[metalv1alpha1.OperationAnnotation]
	if !found {
		return false
	}
	return val == metalv1alpha1.ForceUpdateInProgressOperationAnnotation || val == metalv1alpha1.ForceUpdateOrDeleteInProgressOperationAnnotation
}

func ShouldAllowForceDeleteInProgress(obj client.Object) bool {
	val, found := obj.GetAnnotations()[metalv1alpha1.OperationAnnotation]
	if !found {
		return false
	}
	return val == metalv1alpha1.ForceUpdateOrDeleteInProgressOperationAnnotation
}
